{
  "paths": {
    "base_dir": "D:\\project\\plsr\\data",
    "lq_dir_name": "low_quality_target_spectra",
    "hq_dir_name": "high_quality_source_spectra",
    "element_file_name": "标准岩石样品5样品-2.xlsx",
    "output_dir": "results"
  },
  "preprocessing": {
    "resampling_method": "pchip",
    "steps": [
   
      {
      "method": "smoothing",
      "params": { "method": "savgol", "window_length": 9, "polyorder": 3 },
      "name": "SG平滑"
      },
      {
      "method": "asls_baseline_correction",
      "params": { "lam": 100000, "p": 0.001, "niter": 10 },
      "name": "AsLS基线校正"
      },
    
      {
      "method": "snv_normalization",
      "params": {},
      "name": "SNV归一化"
      }
     
    ]
  },
  "model": {
    "calibration": {
      "method": "PLSR",
      "params": {
        "max_components": 15,
        "scale": false,
        "learn_difference": true,
        "parsimony_threshold": 0.03,
        "selection_method": "min_mse",
        "f_test_alpha": 0.05,
        "wold_r_threshold": 0.98
      }
    },
    "prediction": {
      "method": "PLSR",
      "params": {
        "max_components": 15,
        "scale": false,
        "parsimony_threshold": 0.03,
        "selection_method": "wold_r",
        "f_test_alpha": 0.05,
        "wold_r_threshold": 0.98
      }
    },
    "feature_selection": {
      "enabled": true,
      "method": "rfe",
      "params": {
        "n_features_to_select": 500,
        "step": 0.1
      },
      
      "roi_ranges": {
        "Mg": [[279.08, 279.08], [279.55, 279.55],[279.8, 279.8], [280.27, 280.27],[285.21, 285.21]],
        "Al": [[308.21, 308.21], [309.27, 309.27], [394.40, 394.40], [396.15, 396.15]],
        "Si": [[263.13, 263.13], [288.16, 288.16], [390.55, 390.55]],
        "Ca": [[315.89, 315.89], [317.93, 317.93], [393.37, 393.37], [422.67, 422.67]],
        "Ti": [[306.62, 306.62], [307.87, 307.87], [308.80, 308.80], [323.45, 323.45], [323.66, 323.66], [323.90, 323.90], [326.16, 326.16], [332.95, 332.95], [334.94, 334.94], [336.12, 336.12], [337.28, 337.28], [368.52, 368.52]],
        "Mn": [[403.08, 403.08], [403.31, 403.31], [403.49, 403.49]],
        "Fe": [[261.19, 261.19], [273.95, 273.95], [274.65, 274.65], [274.93, 274.93], [275.58, 275.58], [293.69, 293.69], [302.10, 302.10], [334.06, 334.06], [358.12, 358.12], [361.88, 361.88], [371.99, 371.99], [438.35, 438.35]]
      }
    },
    "mode_feature_selection": {
      "LQ-only": {
        "enabled": true,
        "method": "rfe",
        "params": { "n_features_to_select": 500, "step": 0.1 }
      },
      "Calib-Spec": {
        "enabled": false
      },
      "HQ-only": {
        "enabled": true,
        "method": "pearson",
        "params": { "threshold": 0.1 }
      },
      "Calib-Self": { "enabled": false }
    },
    "mode_strategies": {
      "LQ-only": "wold_r",
      "Calib-Spec": "wold_r",
      "HQ-only": "wold_r",
      "Calib-Self": "wold_r"
    },
    "test_size": 0.2,      
    "random_state": 42,    
    "manual_split": {
      "enabled": true,
      "train_samples": [],
      "test_samples": [9,13,17,21,25,29,33,37,41,45]
    }
  },

  "_method_templates_for_copy_paste": {
    "PLSR_Default": {
      "method": "PLSR",
      "params": {
        "max_components": 15,
        "scale": false,
        "learn_difference": true,
        "parsimony_threshold": 0.03,
        "selection_method": "min_mse"
      }
    },
    "SVR_NonLinear": {
      "method": "SVR",
      "params": {
        "kernel": "rbf",
        "C": 100,
        "gamma": "scale",
        "epsilon": 0.1,
        "scale": true,
        "learn_difference": true
      }
    },
    "ElasticNet_Sparse": {
      "method": "ElasticNet",
      "params": {
        "alpha": 0.01,
        "l1_ratio": 0.5,
        "scale": true,
        "learn_difference": true
      }
    },
    "RandomForest_Ensemble": {
      "method": "RF",
      "params": {
        "n_estimators": 200,
        "max_depth": 20,
        "learn_difference": true
      }
    }
  },
  "_feature_selection_templates": {
    "Pearson_Correlation": {
      "enabled": true,
      "method": "pearson",
      "params": { "threshold": 0.45 }
    },
    "RFE_Recursive": {
      "enabled": true,
      "method": "rfe",
      "params": {
        "n_features_to_select": 100,
        "step": 0.1
      }
    },
    "CARS_Advanced": {
      "enabled": true,
      "method": "cars",
      "params": {
        "n_runs": 50,
        "n_folds": 5
      }
    },
    "ROI_Physics": {
      "enabled": true,
      "method": "roi"
    },
    "GA_Evolutionary": {
      "enabled": true,
      "method": "ga",
      "params": {
        "n_population": 30,
        "n_generations": 20,
        "crossover_prob": 0.8,
        "mutation_prob": 0.1,
        "early_stopping_patience": 5,
        "adaptive_mutation_threshold": 2,
        "max_mutation_prob": 0.3,
        "mutation_increase_factor": 0.5
      }
    }
  },
    "_preprocessing_templates_for_copy_paste": {
    "baseline_correction": {
      "method": "baseline_correction",
      "params": { "degree": 3 },
      "name": "多项式基线校正"
    },
    "asls_baseline_correction": {
      "method": "asls_baseline_correction",
      "params": { "lam": 100000, "p": 0.001, "niter": 10 },
      "name": "AsLS基线校正"
    },
    "smoothing": {
      "method": "smoothing",
      "params": { "method": "savgol", "window_length": 5, "polyorder": 3 },
      "name": "SG平滑"
    },
    "snv_normalization": {
      "method": "snv_normalization",
      "params": {},
      "name": "SNV归一化"
    },
    "min_max_normalization": {
      "method": "min_max_normalization",
      "params": {},
      "name": "Min-Max归一化"
    },
    "l2_normalization": {
      "method": "l2_normalization",
      "params": {},
      "name": "L2范数归一化"
    },
    "derivative_spectrum": {
      "method": "derivative_spectrum",
      "params": { "order": 1 },
      "name": "一阶导数"
    },
    "msc_normalization": {
      "method": "msc_normalization",
      "params": {},
      "name": "MSC归一化"
    },
    "normalize_max": {
      "method": "normalize_max",
      "params": {},
      "name": "最大值归一化"
    },
    "area_normalization": {
      "method": "area_normalization",
      "params": {},
      "name": "面积归一化"
    },
    "spectral_alignment": {
      "method": "spectral_alignment",
      "params": { "max_shift": 10, "reference_method": "mean" },
      "name": "光谱对齐(Shift Correction)"
    }
  },
  "_available_resampling_methods": {
    "cubic_spline": "三次样条插值 (, 平滑且连续，适合大多数光谱)",
    "pchip": "PCHIP插值 (保形插值, 避免在峰值附近产生虚假振荡)",
    "akima": "Akima插值 (介于样条和线性之间, 对离群点不敏感)",
    "linear": "线性插值 (简单连接两点, 计算最快)",
    "nearest": "最近邻插值 (阶梯状, 通常不推荐用于光谱)"
  },
  "_available_selection_methods": {
    "min_mse": "最小均方误差 (追求最高精度，适合欠拟合场景)",
    "1-se": "一倍标准误准则 (简约原则，防止过拟合，适合噪声大数据)",
    "f_test": "F检验 (统计显著性检验，寻找无显著差异的最简模型)",
    "wold_r": "Wold's R准则 (基于PRESS比率停止增加主成分)",
    "parsimony": "相关性简约阈值 (仅用于校准任务，基于相关性提升幅度)"
  }
}